{"version":3,"file":"utils.js","sources":["../src/utils.js"],"sourcesContent":["function strToCompareArray(str) {\n\n    return str.split(/\\W+/g).map(c => c.trim().toLowerCase()).filter(c => c.length > 1);\n\n}\n\nfunction compareStr(a, b) {\n\n    if (typeof a === 'string') a = strToCompareArray(a);\n    if (typeof b === 'string') b = strToCompareArray(b);\n\n    let tot = 0;\n    for (let i = 0, l = a.length; i < l; i++) {\n\n        if (b.includes(a[i])) tot++;\n\n    }\n\n    return tot / Math.min(a.length, b.length);\n\n}\n\nfunction findMatch(name, list) {\n\n    let matches = null;\n    let score = -Infinity;\n\n    const versionMatches = /\\w*\\d\\d\\d+\\w*/.exec(name);\n    let versionRegexp = null;\n    if (versionMatches) {\n        versionRegexp = new RegExp(`(^|\\\\W)${ versionMatches[0] }(\\\\W|$)`, 'i');\n    }\n\n    const gpuArr = strToCompareArray(name);\n    for (let i = 0, l = list.length; i < l; i++) {\n\n        const name = list[i];\n        if (versionRegexp && !versionRegexp.test(name)) continue;\n        if (!versionRegexp && /\\d\\d\\d+/.test(name)) continue;\n\n        const similarity = compareStr(name, gpuArr);\n        if (similarity > score) {\n\n            score = similarity;\n            matches = [name];\n\n        } else if (similarity === score) {\n\n            matches.push(name);\n\n        }\n\n    }\n\n    return { matches, score };\n\n}\n\nexport { findMatch };\n"],"names":[],"mappings":";;;;;;IAAA,SAAS,iBAAiB,CAAC,GAAG,EAAE;;IAEhC,IAAI,OAAO,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;;IAExF,CAAC;;IAED,SAAS,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE;;IAE1B,IAAI,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC;IACxD,IAAI,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC;;IAExD,IAAI,IAAI,GAAG,GAAG,CAAC,CAAC;IAChB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;;IAE9C,QAAQ,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC;;IAEpC,KAAK;;IAEL,IAAI,OAAO,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;;IAE9C,CAAC;;IAED,SAAS,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE;;IAE/B,IAAI,IAAI,OAAO,GAAG,IAAI,CAAC;IACvB,IAAI,IAAI,KAAK,GAAG,CAAC,QAAQ,CAAC;;IAE1B,IAAI,MAAM,cAAc,GAAG,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtD,IAAI,IAAI,aAAa,GAAG,IAAI,CAAC;IAC7B,IAAI,IAAI,cAAc,EAAE;IACxB,QAAQ,aAAa,GAAG,IAAI,MAAM,CAAC,CAAC,OAAO,GAAG,cAAc,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,EAAE,GAAG,CAAC,CAAC;IAChF,KAAK;;IAEL,IAAI,MAAM,MAAM,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;IAC3C,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;;IAEjD,QAAQ,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IAC7B,QAAQ,IAAI,aAAa,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,SAAS;IACjE,QAAQ,IAAI,CAAC,aAAa,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,SAAS;;IAE7D,QAAQ,MAAM,UAAU,GAAG,UAAU,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IACpD,QAAQ,IAAI,UAAU,GAAG,KAAK,EAAE;;IAEhC,YAAY,KAAK,GAAG,UAAU,CAAC;IAC/B,YAAY,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC;;IAE7B,SAAS,MAAM,IAAI,UAAU,KAAK,KAAK,EAAE;;IAEzC,YAAY,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;IAE/B,SAAS;;IAET,KAAK;;IAEL,IAAI,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;IAE9B,CAAC;;;;;;;;;;;;"}